{% extends "layout.html" %}
{% block content %}
<h2 class="text-2xl font-bold text-gray-800 mb-8">ğŸ› ï¸ ê´€ë¦¬ì ì½˜í…ì¸  ëŒ€ì‹œë³´ë“œ</h2>

<!-- âœ… íŠ¸ë Œë“œ ê´€ë¦¬ -->
<section class="mb-14">
  <div class="flex justify-between items-center mb-4">
    <h3 class="text-xl font-semibold text-gray-700">ğŸ“Š ë“±ë¡ëœ íŠ¸ë Œë“œ</h3>
    <a href="/admin/trends/new" class="text-sm bg-blue-600 text-white px-4 py-1 rounded hover:bg-blue-700 transition">â• ìƒˆ íŠ¸ë Œë“œ ë“±ë¡</a>
  </div>

  {% if trends %}
    <ul class="space-y-3">
      {% for t in trends %}
        <li class="bg-white rounded-lg p-5 shadow flex justify-between items-center">
          <div>
            <div class="font-semibold text-gray-900">{{ t.title }}</div>
            <div class="text-sm text-gray-500">
              {{ t.id }} | ì „ëµ {{ t.strategies|length }}ê°œ / ì‹œë‚˜ë¦¬ì˜¤ {{ t.scenarios|length }}ê°œ
            </div>
          </div>
          <div class="flex gap-2 text-sm">
            <a href="/admin/trend/{{ t.id }}/edit" class="text-blue-600 hover:underline">âœï¸ ìˆ˜ì •</a>
            <form method="POST" action="/admin/trend/{{ t.id }}/delete" onsubmit="return confirm('íŠ¸ë Œë“œë¥¼ ì‚­ì œí• ê¹Œìš”?')" style="display:inline">
              <button class="text-red-600 hover:underline">ğŸ—‘ ì‚­ì œ</button>
            </form>
          </div>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="text-sm text-gray-500">ë“±ë¡ëœ íŠ¸ë Œë“œê°€ ì—†ìŠµë‹ˆë‹¤.</p>
  {% endif %}
</section>

<!-- âœ… ì „ëµ ì¹´ë“œ ê´€ë¦¬ -->
<section>
  <h3 class="text-xl font-semibold text-gray-700 mb-4">ğŸ§  ì „ëµ ì¹´ë“œ ì „ì²´ ë³´ê¸°</h3>

  {% if strategies %}
    <ul class="space-y-3">
      {% for s in strategies %}
        <li class="bg-white rounded-lg p-5 shadow flex justify-between items-center">
          <div>
            <div class="font-semibold text-gray-900">{{ s.title }}</div>
            <div class="text-sm text-gray-500">
              ì „ëµ ID: {{ s.id }} | íŠ¸ë Œë“œ: {{ s.trend.title if s.trend else 'ì—†ìŒ' }}
            </div>
          </div>
          <form method="POST" action="/admin/strategy/{{ s.id }}/delete" onsubmit="return confirm('ì „ëµ ì¹´ë“œë¥¼ ì‚­ì œí• ê¹Œìš”?')" style="display:inline">
            <button class="text-red-600 hover:underline text-sm">ğŸ—‘ ì‚­ì œ</button>
          </form>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="text-sm text-gray-500">ì „ëµ ì¹´ë“œê°€ ì•„ì§ ì—†ìŠµë‹ˆë‹¤.</p>
  {% endif %}
</section>
{% endblock %}
